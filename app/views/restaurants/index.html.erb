<div class="restaurant-index">
    <div class="restaurants-container">
        <div class="search-box">
            <%= form_tag restaurants_path, method: :get do %>
                <%= text_field_tag :query,
                    params[:query],
                    class: "form-control",
                    placeholder: "Find a restaurant"
                %>
            <%= submit_tag "Search", class: "btn btn-primary" %>
            <% end %>
        </div>
        <ul>
            <% @restaurants.each do |restaurant| %>
                <div class="restaurant-card">
                    <%= link_to restaurant_path(restaurant), target: :_blank do %>
                        <div class="image-segment">
                            <img class="restaurant-image" src="https://source.unsplash.com/mE6kjov4rTg" alt="">
                            <% end %>
                            <div class="mood-rating-text">
                                <p> %</p>
                            </div>
                            <%# if current user hasn't bookmarked the restaurant, we want to show far %>
                            <% if !restaurant.bookmarked_by(current_user) %>
                                <%= link_to restaurant_bookmarks_path(restaurant), method: :post, class: "like-button", remote: true do %>
                                    <i class="like-icon far fa-heart"></i>
                                <% end %>
                            <%# else we want to show link to destroy action and our icon will be fas %>
                            <% else %>
                                <% @existing_bookmark = Bookmark.where(user: current_user, restaurant: restaurant).first %>
                                <%= link_to bookmark_path(@existing_bookmark), method: :delete, class: "like-button", remote: true do %>
                                    <i class="like-icon fas fa-heart"></i>
                                <% end %>
                            <% end %>
                            <%# <button class="like-button"><i class="like-icon far fa-heart"></i></button>  %>
                        </div>
                    <p style="color:#b9b9b9; font-size:15px"><i class="fas fa-utensils"></i> <%= restaurant.cuisine %>  <i class="fas fa-map-marker-alt"></i> <%= restaurant.location %></p>
                    <%= link_to restaurant_path(restaurant), target: :_blank, :class => "restaurant-link" do %>
                        <p class="restaurant-name"><%= restaurant.name%></p>
                    <% end %>
                    <p class="mt-2"><%= restaurant.description %></p>
                    <div class="mt-3" style="position:absolute; display:inline-block"><p><%= restaurant.rating %> <i class="fas fa-star"></i> (23) | $<%= restaurant.price / 2 %>pp</p></div>
                </div>
            <% end %>
        </ul>
    </div>
</div>
